/**
 * bella-scheduler
 * v1.1.2
 * built: Tue, 04 Oct 2016 01:52:10 GMT
 * git: https://github.com/ndaidong/bella-scheduler
 * author: @ndaidong
 * License: MIT
**/
;var $jscomp={scope:{},checkStringArgs:function(b,g,e){if(null==b)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return b+""}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,g,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[g]=e.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,g,e,k){if(g){e=$jscomp.global;b=b.split(".");for(k=0;k<b.length-1;k++){var q=b[k];q in e||(e[q]={});e=e[q]}b=b[b.length-1];k=e[b];g=g(k);g!=k&&null!=g&&$jscomp.defineProperty(e,b,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("String.prototype.repeat",function(b){return b?b:function(b){var e=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var g="";b;)if(b&1&&(g+=e),b>>>=1)e+=e;return g}},"es6-impl","es3");
(function(b,g){if("undefined"!==typeof module&&module.exports)module.exports=g();else{var e=window||{};e.define&&e.define.amd?e.define([],g):e.exports?e.exports=g():e[b]=g()}})("scheduler",function(){var b=function(a,f){if(!a||!f)return!1;var c=!0;void 0===a[f]&&(c=f in a);return c},g=function(){this.size=0;this.data={}};g.prototype.set=function(a,f){var c=this.data;b(c,a)||this.size++;c[a]=f;return this};g.prototype.get=function(a){return this.data[a]||null};g.prototype.all=function(){var a=this.data,
f=[],c;for(c in a)void 0!==a[c]&&f.push(a[c]);return f};g.prototype.delete=function(a){var f=this.data;if(!b(f,a))return!1;f[a]=null;delete f[a];this.size--;return!0};var e=new g,k,q=function(a,f){for(var c=-1,b=0;b<a.length;b++)if(a[b]===f){c=b;break}return c},t=function(a,f){var c=a.match(/^(\d+)\s?(d|h|m|s)+$/i);if(c){a=0;f=(new Date).getTime()-f;if(c){var b=parseInt(c[1],10),c=c[2];"s"===c?a=1E3:"m"===c?a=6E4:"h"===c?a=36E5:"d"===c&&(a=864E5);a=a*b-f}else a=-1;return a}if(c=a.match(/^(sun|mon|tue|wed|thu|fri|sat)+\w*\s+(\d+)(:\d+)?(:\d+)?$/i)){var d=
c,c="sun mon tue wed thu fri sat".split(" ");a=new Date;f=a.getDay();f=q(c[f],c);var b=d[1].toLowerCase(),e=q(b,c),g=b=c=0;d[2]&&(c=parseInt(d[2],10));d[3]&&(b=parseInt(d[3].replace(/\D/gi,""),10));d[4]&&(g=parseInt(d[4].replace(/\D/gi,""),10));a.setHours(c);a.setMinutes(b);a.setSeconds(g);var k=a.getTime(),d=(new Date).getTime(),p=a;if(e<f||d>k)a=new Date(a),a.setDate(a.getDate()+f+7-a.getDay()%7),p=a;p.setHours(c);p.setMinutes(b);p.setSeconds(g);return p.getTime()-d}if(c=a.match(/^(\*|\d+)\s+(\*|\d+)\s+(\*|\d+)\s+(\*|\d+)\s+(\*|\d+)\s+(\d+)$/i)){d=
c;a="*"===d[1]?"*":parseInt(d[1],10);f="*"===d[2]?"*":parseInt(d[2],10);var c="*"===d[3]?"*":parseInt(d[3],10),b="*"===d[4]?"*":parseInt(d[4],10),g="*"===d[5]?"*":parseInt(d[5],10),n="*"===d[6]?"*":parseInt(d[6],10),l=new Date,h=l.getFullYear();if("*"!==a&&a<h)a=-1;else{var d=a,e=f,k=c,p=b,m=g;"*"===a&&(d=h);h=l.getMonth()+1;"*"===f&&(e=h);h=l.getDate();"*"===c&&(k=h);h=l.getHours();"*"===b&&(p=h);l=l.getMinutes();"*"===g&&(m=l);n=new Date(d,e-1,k,p,m,n);h=n.getTime();l=(new Date).getTime();h-=l;
0>h&&"*"===g&&(n.setMinutes(m+1),h=n.getTime(),h-=l);0>h&&"*"===b&&(n.setHours(p+1),h=n.getTime(),h-=l);0>h&&"*"===c&&(n.setDate(k+1),h=n.getTime(),h-=l);0>h&&"*"===f&&(n.setMonth(e),h=n.getTime(),h-=l);0>h&&"*"===a&&(n.setFullYear(d+1),h=n.getTime(),h-=l);a=h}return a}return-1},u=function(a){a.fn();var b=a.id;if(!a.repeat)return e.delete(b);var c=(new Date).getTime();a.lastTick=c;e.set(b,a);return!0},r=function(){if(0<e.size){var a=2147483647,b=[];e.all().forEach(function(c){var f=c.id,d=t(c.time,
c.lastTick);0>d?e.delete(f):0===d?(c.delay=0,b.push(c)):(c.delay=d,e.set(f,c),d<=a&&(a=d,f=[],f=b.concat(c),b=f.filter(function(b){return b.delay<=a})))});k&&clearTimeout(k);b.length&&(k=setTimeout(function(){b.map(u);setTimeout(r,1)},a))}},m=function(a,b,c){c=c?0:1;var f=(new Date).getTime(),d;for(d=[];10>d.length;)d.push(Math.random().toString(36).slice(2));d=d.join("");for(var g=d.length,k=Math.max(32,0),m="";m.length<k;)m+=d.charAt(Math.floor(Math.random()*g))||"";d=m;e.set(d,{id:d,fn:b,time:a,
repeat:c,createdAt:f,lastTick:f,delay:0});r()};return{yearly:function(a,b){m("* "+a,b)},monthly:function(a,b){m("* * "+a,b)},daily:function(a,b){m("* * * "+a,b)},hourly:function(a,b){return m("* * * * "+a,b)},every:function(a,b){return m(a,b)},once:function(a,b){return m(a,b,1)}}});